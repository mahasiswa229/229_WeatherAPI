<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaca Sederhana</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <style>
        /* CSS yang sangat sederhana */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            background-color: #fff;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .search-area {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
        }
        .search-area input[type="text"] {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .search-area button {
            padding: 8px 15px;
            background-color: #5c8fb8; /* Warna hijau sederhana */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .weather-info {
            padding: 10px;
            border-top: 1px solid #eee;
        }
        .weather-info p {
            margin: 5px 0;
            font-size: 1.1em;
        }
        .suhu-utama {
            font-size: 2.5em;
            font-weight: bold;
            color: #3498db;
            text-align: center;
            margin: 15px 0;
        }
    </style>
</head>
<body>
 div class="container">
        <h1>Cuaca Sederhana</h1>
        <input type="text" id="cityInput" placeholder="Masukkan nama kota">
        <button id="getWeatherBtn">Dapatkan Cuaca</button>
        <div id="weatherResult"></div>
    </div>
    <script>
         // API Key dan Lokasi default
        const API_KEY = "f8d097b1a6564076a7f20824250710"; 

        // Fungsi untuk mengambil data dari API
        function fetchWeather(location) {
            $('#weather-display').html('<p style="color: orange;">Memuat data cuaca untuk <strong>' + location + '</strong>... ⏳</p>');
            
            const urlapi = `http://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${location}&aqi=no`;

            $.ajax({
                url: urlapi,
                method: "GET",
                success: function(data){
                    displayWeather(data);
                },
                error: function(){
                    displayError(location);
                }
            });
        }

        // Fungsi untuk menampilkan data
        function displayWeather(data) {
            const location = data.location;
            const current = data.current;

            // Mengambil data sesuai permintaan
            const lokasi_detail = location.name;
            const provinsi_region = location.region;
            const negara = location.country;
            const suhu = current.temp_c;
            const longitude = location.lon;
            const latitude = location.lat;

            $('#weather-display').html(`
                <p><strong>Lokasi:</strong> ${lokasi_detail}</p>
                <div class="suhu-utama">${suhu}&#8451;</div>
                <p><strong>Kondisi:</strong> ${current.condition.text}</p>
                <hr>
                <p><strong>Negara:</strong> ${negara}</p>
                <p><strong>Provinsi/Wilayah:</strong> ${provinsi_region}</p>
                <p><strong>Longitude:</strong> ${longitude}</p>
                <p><strong>Latitude:</strong> ${latitude}</p>
            `);
            // Fungsi untuk menampilkan pesan error
        function displayError(location) {
            $('#weather-display').html(`
                <p style="color: red;">❌ Gagal memuat data cuaca.<br>
                Lokasi <strong>${location}</strong> tidak ditemukan.</p>
            `);
        }

        // ==================== Penanganan Interaksi User ====================

        // Fungsi yang dipanggil saat tombol Cari diklik
        function handleSearch() {
            const inputLokasi = $('#lokasi-input').val();
            if (inputLokasi.trim()) {
                fetchWeather(inputLokasi.trim());
            } else {
                alert("Mohon masukkan nama kota atau daerah.");
            }
        }
        
        // Event Listener untuk tombol Cari
        $('#cari-btn').on('click', handleSearch);

        // Event Listener untuk tombol 'Enter'
        $('#lokasi-input').on('keypress', function(e) {
            if (e.which == 13) {
                handleSearch();
            }
        });

        // Muat data cuaca default saat halaman pertama kali dibuka
        $(document).ready(function() {
            handleSearch(); // Memuat data dari nilai default "Yogyakarta"
        });
        }

        
    </script>
</body>
</html>